webpackJsonp([13],{115:function(t,e){t.exports={devtool:"cheap-module-source-map",data:function(){return{userPosition:-1,parkList:[{id:"1",communityName:"Name1",carParkNumber:"Num1"},{id:"2",communityName:"Name2",carParkNumber:"Num2"},{id:"3",communityName:"Name3",carParkNumber:"Num3"},{id:"4",communityName:"Name4",carParkNumber:"Num4"}],selected:"",beginDay:"2017-12-12",beginTime:"12:00",endDay:"2018-12-12",endTime:"12:00",hourList:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],minutesList:["00","30"],timeChoose:0,beginFlag:!0,endFlag:!0,currPrice:""}},mounted:function(){},activated:function(){this.srcollInit(),this.initPark(),this.getInfoPublishPark()},created:function(){},watch:{},methods:{getInfoPublishPark:function(){$.ajax({url:urlDir+"/wx/fans/get",type:"GET",success:function(t){0==t.code?null!=t.data&&localStorage.setItem("fansInfo",toJson(t.data)):error_msg(t.code+" 错误 "+t.msg,2e3)},error:function(t){error_msg("网络错误",2e3)}})},goRouter:function(t){this.$router.push({path:t})},initPark:function(){var t=this;$.ajax({url:urlDir+"/wx/market/post/getcarparks",type:"GET",success:function(e){0==e.code?(t.parkList=[],e.data.forEach(function(e,i){t.parkList.push({id:e.id,carParkNumber:e.carParkNumber,communityName:e.communityName})}),t.parkList.length<1?error_msg("您当前没有车位提供发布",2e3):t.selected=t.parkList[0].id):error_msg("错误",2e3)},error:function(t){error_msg("网络错误",2e3)}})},checkCanPublish:function(){var t=this;if(-1==t.userPosition||3==t.userPosition)t.publish();else switch(t.userPosition){case 1:t.goRouter("/guide_page1"),error_msg("请先绑定电话",2e3);break;case 2:t.goRouter("/guide_page2"),error_msg("请先绑定地址",2e3);break;case 3:t.goRouter("/guide_page3_license_plate"),error_msg("请先成为车主",2e3)}},beginTimeChoose:function(){this.timeChoose=0,$("#timeChooseList_dummy").focus()},endTimeChoose:function(){this.timeChoose=1,$("#timeChooseList_dummy").focus()},srcollInit:function(){var t=this,e=[[{values:["2016","2017","2018","2019","2020","2021","2022","2024","2025"],label:"年"}],[{values:["01","02","03","04","05","06","07","08","09","10","11","12"],label:"月"}],[{values:["01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"],label:"日"}],[{values:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],label:"时"}],[{values:["00","30"],label:"分"}]];setTimeout(function(){var i=new Date,a=i.getFullYear(),o=i.getMonth(),n=i.getDay(),r=i.toLocaleDateString(),s=i.getHours(),c=i.getMinutes(),l=e[0][0].values[1*a-2016],d=e[1][0].values[1*o-1],g=e[2][0].values[1*n-1],u=e[3][0].values[1*s-1],m=c<30?e[4][0].values[0]:e[4][0].values[1];$("#beginDayChoose").mobiscroll().scroller({theme:"android-ics",lang:"zh",showLabel:!0,rows:3,display:"bottom",headerText:function(t){return t},wheels:e,defaultValue:[l,d,g,u,m],formatResult:function(e){console.log(e),t.beginFlag?(t.beginFlag=!1,t.beginDay=r.replace(/\//g,"-"),t.beginTime=s+":"+(c<30?"00":"30")):(t.beginDay=e[0]+"-"+e[1]+"-"+e[2],t.beginTime=e[3]+":"+e[4])}}),$("#endDayChoose").mobiscroll().scroller({theme:"android-ics",lang:"zh",showLabel:!0,rows:3,display:"bottom",wheels:e,defaultValue:[l,d,g,u,m],formatResult:function(e){console.log(e),t.endFlag?(t.endFlag=!1,t.endDay=r.replace(/\//g,"-"),t.endTime=s+":"+(c<30?"00":"30")):(t.endDay=e[0]+"-"+e[1]+"-"+e[2],t.endTime=e[3]+":"+e[4])}})},100)},publish:function(){var t=this,e=t.beginDay.replace(/-/g,"")+t.beginTime.replace(/:/g,""),i=t.endDay.replace(/-/g,"")+t.endTime.replace(/:/g,""),a=new Date,o=a.toLocaleDateString(),n=a.getHours(),r=a.getMinutes(),s=o.replace(/\//g,"")+""+n+r;null==t.selected||""==t.selected?error_msg("请先选择要发布的车位",2e3):isNaN(e)||isNaN(i)||1*e>=1*i?error_msg("错误的起止时间，请检查",2e3):1*e<=s?error_msg("开始时间必须大于当前时间",2e3):$.ajax({url:urlDir+"/wx/market/post/check/ordertime",type:"GET",data:{goodsId:t.selected,starttime:t.beginDay+" "+t.beginTime,endtime:t.endDay+" "+t.endTime},success:function(e){0==e.code?e.data?t.show("conflict"):t.preCommit():error_msg(e.code+" 错误 "+e.msg,2e3)},error:function(t){error_msg("网络错误",2e3)}})},preCommit:function(){var t=this,e=toParse(localStorage.getItem("fansInfo")).communityId;$.ajax({url:urlDir+"/wx/market/post/getorderprice",type:"GET",data:{communityId:e,starttime:t.beginDay+" "+t.beginTime,endtime:t.endDay+" "+t.endTime},success:function(e){0==e.code?(t.currPrice=e.data,t.show("income")):error_msg(e.code+" 错误 "+e.msg,2e3)},error:function(t){error_msg("网络错误",2e3)}})},commit:function(){var t=this;$.ajax({url:urlDir+"/wx/market/post/postCarpark",type:"POST",data:{price:t.currPrice,goodsId:t.selected,starttime:t.beginDay+" "+t.beginTime,endtime:t.endDay+" "+t.endTime},success:function(e){0==e.code?error_msg("发布成功",2e3):3310==e.code?t.show("depositNotEnough"):3320==e.code?t.show("balanceNotEnough"):error_msg(e.code+" 错误 "+e.msg,2e3),t.close("income")},error:function(e){error_msg("网络错误",2e3),t.close("income")}})},show:function(t){$("."+t).css("display","block")},close:function(t){$("."+t).css("display","none")},choseImagrs:function(){var t=this;wx.chooseImage({count:1,sizeType:["original"],sourceType:["album","camera"],success:function(e){t.showImage=e.localIds[0],wx.uploadImage({localId:e.localIds[0],isShowProgressTips:1,success:function(e){t.imgUpload(e.serverId)}})}})}}}},157:function(t,e,i){e=t.exports=i(11)(!1),e.push([t.i,".publish_park_cantabile[data-v-f5267496]{width:100%;height:100%;text-align:center;padding:8%}.head img[data-v-f5267496]{width:50%;margin:0 auto}.parkChoose[data-v-f5267496]{width:100%;height:50px;background:linear-gradient(#fff,#e9e9e9);border-radius:12px;line-height:50px;padding:0 10px;margin:15px 0}.parkChoose span[data-v-f5267496]{width:100%;text-align:left}.parkChoose select[data-v-f5267496]{width:70%;height:28px;float:right;margin:11px 0;background-color:#f9f9f9}.timeChoose[data-v-f5267496]{width:100%;height:80px;border-radius:12px;padding:0 10px;background:linear-gradient(#fff,#e9e9e9)}.imgCenter[data-v-f5267496]{width:15px;height:15px;margin:12px 10px}.begin[data-v-f5267496],.end[data-v-f5267496]{width:100%;height:50%;line-height:40px}.publish[data-v-f5267496]{width:100%;height:50px;margin:10px 0;line-height:50px;padding-left:30px;padding-right:30px}.publish input[data-v-f5267496]{width:100%;height:60%;border-radius:7px;color:#fff;background-color:#ff383f}.margin-l[data-v-f5267496]{margin-left:10px}.ceng[data-v-f5267496]{width:100%;height:100%;padding-left:15%;padding-right:15%;position:absolute;top:0;left:0;background:hsla(0,0%,100%,.75)}.ceng .dialog[data-v-f5267496]{height:2.2rem;width:70%;position:absolute;top:50%;left:50%;margin-left:-35%;margin-top:-1.7rem;padding-top:.1rem;padding-bottom:.1rem;background-color:#fff;border-radius:.2rem;box-shadow:0 0 1rem 0 #c9c9c9;border:1px solid #cbcbcd}.ceng .dialog .income_content p[data-v-f5267496]{height:.65rem;text-align:center;line-height:.65rem}.ceng .dialog .income_content div[data-v-f5267496]{height:.7rem;padding-top:.1rem;padding-bottom:.1rem}.ceng .dialog .income_content div input[data-v-f5267496]{height:.5rem;width:35%;margin-left:.1rem;margin-right:.1rem;border-radius:.1rem;background-color:#858585;color:#fff}.ceng .dialog .conflict_content img[data-v-f5267496]{width:.85rem;height:.85rem;margin-left:2.5%}.ceng .dialog .conflict_content p[data-v-f5267496]{margin-top:.2rem;width:95%;height:1rem}.ceng .dialog .conflict_content div[data-v-f5267496]{width:100%;height:.8rem;text-align:center;padding-top:.15rem;padding-bottom:.15rem}.ceng .dialog .conflict_content div input[data-v-f5267496]{width:60%;height:.5rem;border-radius:.1rem;background-color:#f1f3f1}.ceng .dialog .balanceNotEnough_content img[data-v-f5267496]{width:.85rem;height:.85rem;margin-left:2.5%;margin-right:.15rem}.ceng .dialog .balanceNotEnough_content p[data-v-f5267496]{margin-top:.2rem;width:95%;height:1rem;line-height:1rem}.ceng .dialog .balanceNotEnough_content div[data-v-f5267496]{width:100%;height:.8rem;text-align:center;padding-top:.15rem;padding-bottom:.15rem}.ceng .dialog .balanceNotEnough_content div input[data-v-f5267496]{width:30%;height:.5rem;margin-left:.2rem;margin-right:.2rem;border-radius:.1rem;background-color:#f1f3f1}.ceng .dialog .depositNotEnough_content img[data-v-f5267496]{width:.85rem;height:.85rem;margin-left:2.5%;margin-right:.15rem}.ceng .dialog .depositNotEnough_content p[data-v-f5267496]{margin-top:.2rem;width:95%;height:1rem;line-height:1rem}.ceng .dialog .depositNotEnough_content div[data-v-f5267496]{width:100%;height:.8rem;text-align:center;padding-top:.15rem;padding-bottom:.15rem}.ceng .dialog .depositNotEnough_content div input[data-v-f5267496]{width:30%;height:.5rem;margin-left:.2rem;margin-right:.2rem;border-radius:.1rem;background-color:#f1f3f1}",""])},195:function(t,e,i){var a=i(157);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(12)("af13ea58",a,!0)},215:function(t,e,i){t.exports=i.p+"static/img/logo4.4cf6b16.png"},264:function(t,e,i){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"publish_park_cantabile"},[t._m(0),t._v(" "),a("div",{staticClass:"parkChoose"},[a("span",{staticClass:"l font34"},[t._v("车位选择: "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selected=e.target.multiple?i:i[0]}}},t._l(t.parkList,function(e){return a("option",{domProps:{value:e.id}},[t._v(t._s(e.communityName+" "+e.carParkNumber))])}))])]),t._v(" "),a("div",{staticClass:"timeChoose"},[a("div",{staticClass:"begin"},[a("span",{staticClass:"l font34"},[t._v("起始时间: ")]),a("span",{staticClass:"r font28 margin-l",attrs:{id:"beginTimeChoose"},on:{click:t.beginTimeChoose}},[t._v(t._s(t.beginTime)+" "),a("img",{staticClass:"r imgCenter",attrs:{src:i(82)}})]),a("span",{staticClass:"r font28",attrs:{id:"beginDayChoose"}},[t._v(t._s(t.beginDay))])]),t._v(" "),a("div",{staticClass:"end"},[a("span",{staticClass:"l font34"},[t._v("结束时间: ")]),a("span",{staticClass:"r font28 margin-l",attrs:{id:"endTimeChoose"},on:{click:t.endTimeChoose}},[t._v(t._s(t.endTime)+" "),a("img",{staticClass:"r imgCenter",attrs:{src:i(82)}})]),a("span",{staticClass:"r font28",attrs:{id:"endDayChoose"}},[t._v(t._s(t.endDay))])])]),t._v(" "),a("div",{staticClass:"publish"},[a("input",{staticClass:"font36",attrs:{type:"button",value:"发布车位"},on:{click:t.checkCanPublish}})]),t._v(" "),a("div",{staticClass:"about r"},[a("em",{staticClass:"font26 fcb",on:{click:function(e){t.goRouter("/protocol")}}},[t._v("计费规则及其他")])]),t._v(" "),a("div",{staticClass:"ceng income",staticStyle:{display:"none"}},[a("div",{staticClass:"dialog"},[a("div",{staticClass:"income_content"},[a("p",{staticClass:"font32"},[t._v("本次订单预计收益")]),t._v(" "),a("p",{staticClass:"font40 fcff"},[a("span",{staticClass:"fce9 font54"},[t._v("￥")]),t._v(t._s(t.currPrice||0))]),t._v(" "),a("div",[a("input",{attrs:{type:"button",value:"确定发布"},on:{click:t.commit}}),t._v(" "),a("input",{staticStyle:{"background-color":"#e3e3e3",color:"#504f53"},attrs:{type:"button",value:"斟酌斟酌"},on:{click:function(e){t.close("income")}}})])])])]),t._v(" "),a("div",{staticClass:"ceng conflict",staticStyle:{display:"none"}},[a("div",{staticClass:"dialog"},[a("div",{staticClass:"conflict_content"},[a("img",{staticClass:"l",attrs:{src:i(57)}}),t._v(" "),a("p",{staticClass:"font32"},[t._v("本次订单与您的其他订单存在时间冲突，请重新选择")]),t._v(" "),a("div",[a("input",{attrs:{type:"button",value:"确定"},on:{click:function(e){t.close("conflict")}}})])])])]),t._v(" "),a("div",{staticClass:"ceng balanceNotEnough",staticStyle:{display:"none"}},[a("div",{staticClass:"dialog"},[a("div",{staticClass:"balanceNotEnough_content"},[a("img",{staticClass:"l",attrs:{src:i(57)}}),t._v(" "),a("p",{staticClass:"font32"},[t._v("余额 不足请充值再继续")]),t._v(" "),a("div",[a("input",{staticStyle:{"background-color":"#3c3b3d",color:"#fff"},attrs:{type:"button",value:"去充值"},on:{click:function(e){t.goRouter("/balance")}}}),t._v(" "),a("input",{attrs:{type:"button",value:"忍心拒绝"},on:{click:function(e){t.close("balanceNotEnough")}}})])])])]),t._v(" "),a("div",{staticClass:"ceng depositNotEnough",staticStyle:{display:"none"}},[a("div",{staticClass:"dialog"},[a("div",{staticClass:"depositNotEnough_content"},[a("img",{staticClass:"l",attrs:{src:i(57)}}),t._v(" "),a("p",{staticClass:"font32"},[t._v("押金 不足请充值再继续")]),t._v(" "),a("div",[a("input",{staticStyle:{"background-color":"#3c3b3d",color:"#fff"},attrs:{type:"button",value:"去充值"},on:{click:function(e){t.goRouter("/pledge_manage")}}}),t._v(" "),a("input",{attrs:{type:"button",value:"忍心拒绝"},on:{click:function(e){t.close("depositNotEnough")}}})])])])]),t._v(" "),a("ul",{staticStyle:{display:"none"},attrs:{id:"timeChooseList"}},t._l(t.hourList,function(e){return a("li",[a("div",{attrs:{"data-value":e}},[t._v(t._s(e))]),t._v(" "),a("ul",t._l(t.minutesList,function(e){return a("li",{attrs:{"data-value":e}},[t._v(t._s(e))])}))])}))])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"head"},[a("img",{attrs:{src:i(215)}})])}]}},44:function(t,e,i){function a(t){i(195)}var o=i(3)(i(115),i(264),a,"data-v-f5267496",null);t.exports=o.exports},57:function(t,e,i){t.exports=i.p+"static/img/error.013f46a.png"},82:function(t,e,i){t.exports=i.p+"static/img/time_choose.e868de7.png"}});
webpackJsonp([16],{105:function(t,a,e){var i=e(85);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e(12)("0eff3af9",i,!0)},15:function(t,a,e){function i(t){e(105)}var s=e(3)(e(53),e(155),i,"data-v-b4cadfaa",null);t.exports=s.exports},155:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"district"},[e("div",{staticClass:"district_info font32"},[e("div",{staticClass:"word"},[e("span",{staticClass:"l fcg43"},[t._v("小区名称:")]),e("span",{staticClass:"r fcgb1 chose_district font28"},[e("i",{on:{click:function(a){t.show("ceng_district")}}},[t._v(t._s(t.nowName.name))])])]),t._v(" "),e("div",{staticClass:"word"},[e("span",{staticClass:"l fcg43"},[t._v("车位号:")]),e("span",{staticClass:"r fcg43 duan chose_district font28"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.carParkNumber,expression:"carParkNumber"}],staticClass:"number",attrs:{type:"text",name:"",placeholder:"请输入您车位号"},domProps:{value:t.carParkNumber},on:{input:function(a){a.target.composing||(t.carParkNumber=a.target.value)}}})]),e("span",{staticClass:"r chose_district font28",class:"请选择"==t.quyu?"fcgb1":"",on:{click:t.choseQuyu}},[t._v(t._s(t.quyu))]),e("span",{staticClass:"r chose_district font28",class:"请选择"==t.floor?"fcgb1":"",on:{click:t.choseFloor}},[t._v(t._s(t.floor))])]),t._v(" "),e("div",{staticClass:"word"},[e("span",{staticClass:"l fcg43"},[t._v("业主电话:")]),e("span",{staticClass:"r"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"font28",attrs:{type:"number",name:"",placeholder:"请输入您手机号",readonly:""},domProps:{value:t.phone},on:{input:function(a){a.target.composing||(t.phone=a.target.value)},blur:function(a){t.$forceUpdate()}}})])]),t._v(" "),e("div",{staticClass:"word"},[e("span",{staticClass:"l fcg43"},[t._v("车位有效期:")]),e("span",{staticClass:"r chose_district font28",class:"结束日期"==t.endDay?"fcgb1":"",attrs:{id:"education_list3"}},[t._v(t._s(t.endDay))]),e("span",{staticClass:"r chose_district font28",class:"开始日期"==t.beginDay?"fcgb1":"",staticStyle:{"margin-right":".2rem"},attrs:{id:"education_list4"}},[t._v(t._s(t.beginDay))])])]),t._v(" "),e("div",{staticClass:"checkout font34 fcw",on:{click:t.gogo}},[t._v("提交")]),t._v(" "),e("div",{staticClass:"ceng ceng_district fcg43 font30",staticStyle:{display:"none"},on:{click:function(a){t.close("ceng_district")}}},[e("div",{staticClass:"ceng_content centered",on:{click:function(a){t.emptyClick(a)}}},[e("div",{staticClass:"title font38"},[t._v("选择小区")]),t._v(" "),e("div",{staticClass:"word"},[e("span",{staticClass:"l"},[t._v("省:")]),e("span",{staticClass:"r",on:{click:t.getProvince}},[t._v(t._s(t.nowProvince))])]),t._v(" "),e("div",{staticClass:"word"},[e("span",{staticClass:"l"},[t._v("市:")]),e("span",{staticClass:"r",on:{click:t.getCity}},[t._v(t._s(t.nowCity))])]),t._v(" "),e("div",{staticClass:"word"},[e("span",{staticClass:"l"},[t._v("小区名称:")]),e("span",{staticClass:"r",on:{click:t.getName}},[t._v(t._s(t.nowName.name))])])])]),t._v(" "),e("ul",{staticStyle:{display:"none"},attrs:{id:"education_list"}},t._l(t.showList,function(a){return e("li",{attrs:{data:a}},[t._v(t._s(a.name))])})),t._v(" "),e("ul",{staticStyle:{display:"none"},attrs:{id:"education_list5"}},t._l(t.carParkNumberPrefix,function(a,i){return e("li",{attrs:{data:i}},[t._v(t._s(i))])})),t._v(" "),e("ul",{staticStyle:{display:"none"},attrs:{id:"education_list6"}},t._l(t.carParkNumberPre,function(a){return e("li",{attrs:{data:a}},[t._v(t._s(a))])}))])},staticRenderFns:[]}},33:function(t,a,e){t.exports=e.p+"static/img/sanjiao.c1357e8.png"},38:function(t,a,e){t.exports=e.p+"static/img/icon10.bb7857d.png"},53:function(t,a){t.exports={devtool:"cheap-module-source-map",data:function(){return{carEquityImg:"",showImage:"",carParkNumber:"",nowProvince:"请选择省份",nowCity:"请选择城市",nowName:{name:"请选择小区"},phone:"",count:0,showList:[],nowType:"",floor:"请选择",quyu:"请选择",carParkNumberPrefix:{},carParkNumberPre:[],beginDay:"开始日期",endDay:"结束日期"}},mounted:function(){},activated:function(){this.nowName={name:"请选择小区"},this.carParkNumber="",this.floor="请选择",this.quyu="请选择",this.beginDay="开始日期",this.endDay="结束日期",this.close("ceng"),this.count=0,this.getFansInfo(),this.scrollInit()},created:function(){},watch:{},methods:{scrollInit:function(){var t=this;setTimeout(function(){var a=(new Date).getFullYear();$("#education_list3").mobiscroll().date({theme:"",lang:"zh",display:"bottom",startYear:a-5,endYear:a+15,headerText:function(t){var a=t.split("/");return a[0]+"年"+a[1]+"月"+a[2]+"日"},onSelect:function(a,e){var i=a.split("/");return"开始日期"==t.beginDay?(error_msg("请先选择开始日期",2e3),!1):1*t.beginDay.replace(/-/g,"")>1*i.join("")?(error_msg("结束日期必须大于开始日期",2e3),t.endDay="结束日期",!1):void(t.endDay=i[0]+"-"+i[1]+"-"+i[2])}}),$("#education_list4").mobiscroll().date({theme:"",lang:"zh",display:"bottom",startYear:a-5,endYear:a+15,headerText:function(t){var a=t.split("/");return a[0]+"年"+a[1]+"月"+a[2]+"日"},onSelect:function(a,e){var i=a.split("/");"结束日期"!=t.endDay&&1*t.endDay.replace(/-/g,"")<1*i.join("")&&(error_msg("结束日期必须大于开始日期",2e3),t.endDay="结束日期"),t.beginDay=i[0]+"-"+i[1]+"-"+i[2]}})},100)},choseQuyu:function(){var t=this;return"-"!=t.quyu&&("请选择"==t.floor?(error_msg("请先选择楼层",2e3),!1):($("#education_list6").mobiscroll().treelist({theme:"",lang:"zh",display:"bottom",headerText:function(t){console.log(t)},onSelect:function(a,e){t.quyu=$("#education_list6").find("li").eq(a).text()}}),void $("input[id^=education_list6_dummy]").focus()))},choseFloor:function(){var t=this;if("{}"==toJson(this.carParkNumberPrefix))return error_msg("请先选择小区",2e3),!1;$("#education_list5").mobiscroll().treelist({theme:"",lang:"zh",display:"bottom",headerText:function(t){console.log(t)},onSelect:function(a,e){t.floor=$("#education_list5").find("li").eq(a).text(),t.carParkNumberPre=t.carParkNumberPrefix[t.floor],0==t.carParkNumberPre.length&&(t.quyu="-")}}),$("input[id^=education_list5_dummy]").focus()},getFansInfo:function(){var t=this;$.ajax({url:urlDir+"/wx/fans/get",type:"GET",success:function(a){0==a.code&&(t.phone=a.data.phoneNo)},error:function(t){}})},getWx:function(){var t=this;$.ajax({url:urlDir+"/wx/jssdk/sign",type:"POST",data:{url:location.href},success:function(a){"string"==typeof a&&(a=toParse(a)),console.log(a),a.data.appid?wx.config({debug:!1,appId:a.data.appid,timestamp:parseInt(a.data.timestamp),nonceStr:a.data.noncestr,signature:a.data.signature,jsApiList:["chooseImage","uploadImage"]}):++t.count<4&&t.getWx()}})},choseImagrs:function(){var t=this;wx.chooseImage({count:1,sizeType:["original"],sourceType:["album","camera"],success:function(a){t.showImage=a.localIds[0],wx.uploadImage({localId:a.localIds[0],isShowProgressTips:1,success:function(a){t.imgUpload(a.serverId)}})}})},imgUpload:function(t){var a=this;$.ajax({url:urlDir+"/wx/media/upload",type:"GET",data:{serverId:t},success:function(t){0==t.code&&(a.carEquityImg=t.data.filepath)},error:function(t){}})},goRouter:function(t){this.$router.push({path:t})},show:function(t){$("."+t).css("display","block")},close:function(t){$("."+t).css("display","none")},emptyClick:function(t){t.preventDefault(),t.stopPropagation()},setScrollList:function(){var t=this;$("#education_list").mobiscroll().treelist({theme:"",lang:"zh",display:"bottom",headerText:function(t){console.log(t)},onSelect:function(a,e){console.log(a,e),t.setNowTypeName(t.showList[a])}}),$("input[id^=education_list_dummy]").focus()},setNowTypeName:function(t){switch(this.nowType){case"province":this.nowProvince=t.name;break;case"city":this.nowCity=t.name;break;case"name":this.nowName=t,this.floor="请选择",this.quyu="请选择",this.carParkNumberPrefix=JSON.parse(t.carParkNumberPrefix),this.close("ceng_district")}this.showList=[]},getProvince:function(){var t=this;$.ajax({url:urlDir+"/wx/community/province/list",type:"GET",success:function(a){0==a.code&&(t.nowType="province",t.showList=[],a.data.provinceNameList.forEach(function(a,e){t.showList.push({name:a})}),setTimeout(function(){t.setScrollList()},100))},error:function(t){}})},getCity:function(){var t=this;"请选择省份"!=this.nowProvince?$.ajax({url:urlDir+"/wx/community/city/list",type:"GET",data:{provinceName:this.nowProvince},success:function(a){0==a.code&&(t.nowType="city",t.showList=[],a.data.cityNameList.forEach(function(a,e){t.showList.push({name:a})}),setTimeout(function(){t.setScrollList()},100))},error:function(t){}}):error_msg("请先选择省份",2e3)},getName:function(){var t=this;"请选择城市"!=this.nowCity?$.ajax({url:urlDir+"/wx/community/listByCityName",type:"GET",data:{cityName:this.nowCity},success:function(a){0==a.code&&(t.nowType="name",t.showList=a.data,setTimeout(function(){t.setScrollList()},100))},error:function(t){}}):error_msg("请先选择城市",2e3)},gogo:function(){return this.nowName.id?this.carParkNumber?"请选择"==this.floor||"请选择"==this.quyu?(error_msg("请选择车位号区域",2e3),!0):"开始日期"==this.beginDay||"结束日期"==this.endDay?(error_msg("请选择车位起止日期",2e3),!0):void $.ajax({url:urlDir+"/wx/goods/add",type:"POST",data:{communityId:this.nowName.id,carParkNumber:this.floor+";"+("-"==this.quyu?"":this.quyu)+";"+this.carParkNumber,carUsefulFromDate:this.beginDay.replace(/-/g,""),carUsefulEndDate:this.endDay.replace(/-/g,"")},success:function(t){error_msg(t.msg,2e3),0==t.code&&setTimeout(function(){history.back()},1e3)},error:function(t){}}):(error_msg("请先输入车位号",2e3),!0):(error_msg("请先选择小区名称",2e3),!0)}}}},85:function(t,a,e){a=t.exports=e(11)(!1),a.push([t.i,".district[data-v-b4cadfaa]{width:100%;height:100%;position:relative;padding-bottom:1rem;overflow:hidden;background:#f7f3f1}.district_info[data-v-b4cadfaa]{width:7rem;margin:.42rem auto;box-shadow:0 0 .1rem .01rem #dae7ed;background:#fff;padding:.15rem .3rem 0;border-radius:.16rem}.district_info .word .number[data-v-b4cadfaa]{text-align:right}.district_info .word[data-v-b4cadfaa]{height:.9rem;line-height:.9rem}.district_info .word img[data-v-b4cadfaa]{width:.51rem;height:.51rem;display:inline-block;vertical-align:middle}.district_info .word b[data-v-b4cadfaa]{display:inline-block;width:1.68rem;height:.48rem;line-height:.48rem;text-align:center;border-radius:.24rem;background:#0098db}.district_info .word b.cant[data-v-b4cadfaa]{background:#f0f0f0}.district_info .word input[data-v-b4cadfaa]{display:inline-block;width:2.7rem;text-align:right;height:.5rem;line-height:.5rem}.district_info .word span.duan input[data-v-b4cadfaa]{width:2rem}.district_info .chose_district[data-v-b4cadfaa]{background:url("+e(38)+") no-repeat 100%;background-size:.24rem .24rem;padding-right:.4rem}.checkout[data-v-b4cadfaa]{background:#0098db;width:3.7rem;height:.88rem;line-height:.88rem;text-align:center;border-radius:.44rem;margin:3rem auto 0}.ceng[data-v-b4cadfaa]{width:100%;height:100%;position:absolute;top:0;left:0;background:hsla(0,0%,100%,.5)}.ceng .ceng_content[data-v-b4cadfaa]{width:5.9rem;background:#fff;border-radius:.24rem;padding:0 .46rem;box-shadow:0 0 1rem 0 #cfebf8}.ceng_district[data-v-b4cadfaa]{padding:.12rem 0 .6rem}.ceng_district .title[data-v-b4cadfaa]{height:1.14rem;line-height:1.14rem;text-align:center}.ceng_district .word[data-v-b4cadfaa]{height:.96rem;line-height:.96rem}.ceng_district .word span.r[data-v-b4cadfaa]{background:url("+e(33)+") no-repeat 100%;background-size:.16rem .23rem;padding-right:.44rem}.show_list[data-v-b4cadfaa]{width:100%;height:100%;overflow:hidden;position:absolute;top:0;left:0;z-index:20;background:rgba(0,0,0,.5)}.show_list .content[data-v-b4cadfaa]{max-height:5rem;overflow-y:auto;width:100%;position:absolute;bottom:0;background:#fff}.show_list .content p[data-v-b4cadfaa]{line-height:.5rem;text-align:center}input[data-v-b4cadfaa]{background:#fff}",""])}});